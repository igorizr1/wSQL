{"name":"Wsql","tagline":"wSQL - angularJS active record module for WebSQLite database - database in the browser. U can persist your data for your PhoneGap HTML5 applications build with ionic or angular. Good solution for mobile applications with offline mode.","body":"# wSQL\r\nwSQL - angularJS active record module for WebSQLite database - database in the browser. U can persist your data for your PhoneGap HTML5 applications build with ionic or angular. Good solution for mobile applications with offline mode.\r\n\r\n### install from bower\r\nbower install angular-wsql\r\n\r\n### A sample of config file(u need to set your DB schema there) can be found in this repo at src/wSQL.db.config.js (just cope it in your project)\r\n\r\n### methods:\r\n* wSQL.select()\r\n* wSQL.insert(table_name, data)\r\n* wSQL.batch_insert(table_name, data)\r\n* wSQL.update(table_name, data)\r\n* wSQL.delete(table_name)\r\n\r\n### optionally u can perform query directly with passing SQL\r\n* wSQL.query(custom_sql)\r\n\r\n### optionally u can perform queries upon tables\r\n* wSQL.create_table(table_name, table_fields)\r\n* wSQL.drop_table(table_name)\r\n\r\n### methods to query request and generate results (all return promises):\r\n* query - get all results\r\n* row   - get one row\r\n* col   - get one column\r\n```javascript\r\n\r\n    ...\r\n    .query().then(function(result){\r\n        // query returns promise\r\n        console.log(result);\r\n    }, function(error){\r\n        // error result\r\n        console.log(error);\r\n    })\r\n\r\n```\r\n\r\n### list of query modifiers:\r\n* where\r\n* where_in\r\n* and\r\n* and_in\r\n* or\r\n* or_in\r\n* join\r\n* left_join\r\n* having\r\n* set\r\n* group_by\r\n* order_by\r\n* limit //limit also does offset as a second argument\r\n\r\n\r\n## no full DOC yet but samples below -- pretty simple\r\n## also examples can be found in examples/example1\r\n\r\n```javascript\r\nangular.module('sampleApp', [\r\n    \"wSQL.db\"\r\n])\r\n.controller('SampleController', function($scope, wSQL) {\r\n\r\n    // SELECT id, category_id FROM table1 WHERE id=? LIMIT 1\r\n    wSQL.select(\"id, category_id\")\r\n        .from(\"table1\")\r\n        .where(\"id\", 3)\r\n        .col()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    // SELECT * FROM table1 WHERE id>? AND category_id=? OR category_id=? LIMIT 1\r\n    wSQL.select(\"*\")\r\n        .from(\"table1\")\r\n        .where(\"id\", 3, \">\")\r\n        .and(\"category_id\", 15)\r\n        .or(\"category_id\", 14)\r\n        .row()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    // SELECT * FROM table1 WHERE id IN (?, ?, ?)\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .where_in(\"id\", [3,4,6])\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    // SELECT id, category_id, count(*) as amount FROM table1 GROUP BY category_id\r\n    wSQL.select(\"id, category_id, count(*) as amount\")\r\n        .from(\"table1\")\r\n        .group_by(\"category_id\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    // SELECT id, category_id, count(*) as amount FROM table1 GROUP BY category_id HAVING category_id=? OR category_id=?\r\n    wSQL.select(\"id, category_id, count(*) as amount\")\r\n        .from(\"table1\")\r\n        .group_by(\"category_id\")\r\n        .having(\"category_id\", 15)\r\n        .or(\"category_id\", 10)\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n\r\n    // SELECT id, category_id, count(*) as amount FROM table1 WHERE id=57 GROUP BY category_id HAVING category_id=10\r\n    wSQL.select(\"id, category_id, count(*) as amount\")\r\n        .from(\"table1\")\r\n        .where(\"id\", 57)\r\n        .group_by(\"category_id\")\r\n        .having(\"category_id\", 10)\r\n        .or(\"category_id\", 15)\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    // INSERT INTO table1 (category_id) VALUES (?)\r\n    wSQL.insert(\"table1\", {\r\n        category_id: 14\r\n    }).then(function(insert){\r\n        console.log(\"insert_id\");\r\n        console.log(insert.insertId);\r\n    });\r\n\r\n    // INSERT OR IGNORE INTO table1 (category_id,category_name,test_field) SELECT ? as category_id,? as category_name,? as test_field UNION SELECT ?,?,? UNION SELECT ?,?,? UNION SELECT ?,?,?\r\n    wSQL.batch_insert_or_ignore(\"table1\", [\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas1\",\r\n            test_field: \"test_field1\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas2\",\r\n            test_field: \"test_field2\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas3\",\r\n            test_field: \"test_field3\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas4\",\r\n            test_field: \"test_field4\"\r\n        }\r\n    ]).then(function(insert){\r\n        console.log(\"insert_id\");\r\n        console.log(insert.insertId);\r\n    });\r\n    \r\n    // INSERT INTO table1 (category_id,category_name,test_field) SELECT ? as category_id,? as category_name,? as test_field UNION SELECT ?,?,? UNION SELECT ?,?,? UNION SELECT ?,?,?\r\n    wSQL.batch_insert(\"table1\", [\r\n        {\r\n            category_id: 1,\r\n            category_name: \"ttdasdas1\",\r\n            test_field: \"test_field1\"\r\n        },\r\n        {\r\n            category_id: 2,\r\n            category_name: \"ttdasdas2\",\r\n            test_field: \"test_field2\"\r\n        },\r\n        {\r\n            category_id: 3,\r\n            category_name: \"ttdasdas3\",\r\n            test_field: \"test_field3\"\r\n        },\r\n        {\r\n            category_id: 10,\r\n            category_name: \"ttdasdas4\",\r\n            test_field: \"test_field4\"\r\n        }\r\n    ]).then(function(insert){\r\n        console.log(\"insert_id\");\r\n        console.log(insert.insertId);\r\n    });\r\n\r\n    // INSERT OR IGNORE INTO table1 (category_id,category_name,test_field) SELECT ? as category_id,? as category_name,? as test_field UNION SELECT ?,?,? UNION SELECT ?,?,? UNION SELECT ?,?,?\r\n    wSQL.batch_insert(\"table1\", [\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas1\",\r\n            test_field: \"test_field1\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas2\",\r\n            test_field: \"test_field2\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas3\",\r\n            test_field: \"test_field3\"\r\n        },\r\n        {\r\n            category_id: rand(),\r\n            category_name: \"ttdasdas4\",\r\n            test_field: \"test_field4\"\r\n        }\r\n    ],true).then(function(insert){\r\n        console.log(\"insert_id\");\r\n        console.log(insert.insertId);\r\n    });\r\n\r\n\r\n    // UPDATE table1 SET category_id=? WHERE id=?\r\n    wSQL.update(\"table1\", {category_id: 6})\r\n        .where(\"id\", 19)\r\n        .query()\r\n        .then(function(result){\r\n            console.log(result);\r\n        });\r\n\r\n    // DELETE FROM table1 WHERE id = ?\r\n    wSQL.delete(\"table1\")\r\n        .where(\"id\", 18)\r\n        .query()\r\n        .then(function(data){\r\n            console.log(data);\r\n        });\r\n\r\n    /**\r\n     * Direct Queries\r\n     * (better to use ORM stuff)\r\n      */\r\n    // Simple direct query\r\n    wSQL.query(\"SELECT * FROM table1\").then(function(result){\r\n        console.log(result);\r\n    });\r\n\r\n    // Direct Query with params in SQL\r\n    wSQL.query(\"SELECT * FROM table1 WHERE id IN (1,5)\").then(function(result){\r\n        console.log(result);\r\n    });\r\n\r\n    // Pass query params in second argument to avoid escape errors\r\n    wSQL.query(\"SELECT * FROM table1 WHERE category_name=?\", [\"'♥,♥,|'♥,♥,♥'\"]).then(function(result){\r\n        console.log(result);\r\n    });\r\n\r\n    // Or u can get error\r\n    wSQL.query(\"SELECT * FROM table1 WHERE category_name= '♥,♥,|'♥,♥,♥'\").then(function(result){\r\n        console.log(result);\r\n    }, function(error){\r\n        console.log(\"___error\");\r\n        console.log(error);\r\n    });\r\n\r\n    /**\r\n     * Like Queries\r\n     */\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"my_query\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"query\", \"before\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"my_\", \"after\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"y_quer\", \"both\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"%query\", false)\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"s\")\r\n        .and_like(\"test_field\", \"field4\", \"before\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"s\")\r\n        .like(\"test_field\", \"field4\", \"before\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .like(\"category_name\", \"s\")\r\n        .or_like(\"test_field\", \"field4\", \"before\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n    wSQL.select()\r\n        .from(\"table1\")\r\n        .where(\"test_field\", \"test_field4\")\r\n        .like(\"category_name\", \"s\")\r\n        .or_like(\"test_field\", \"field4\", \"before\")\r\n        .query()\r\n        .then(function(d){\r\n            console.log(d);\r\n        });\r\n\r\n});\r\n\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}